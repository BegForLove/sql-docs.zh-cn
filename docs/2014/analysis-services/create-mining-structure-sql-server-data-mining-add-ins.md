---
title: 创建挖掘结构 （SQL Server 数据挖掘外接程序） |Microsoft 文档
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology:
- analysis-services
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- mining structures, creating
ms.assetid: b8b1eedc-4d6d-4429-a578-e629ec573934
caps.latest.revision: 20
author: Minewiskan
ms.author: owend
manager: mblythe
ms.openlocfilehash: 415540535e6456dcead8ca749d8fe0f2fbae5150
ms.sourcegitcommit: 5dd5cad0c1bbd308471d6c885f516948ad67dfcf
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/19/2018
ms.locfileid: "36124673"
---
# <a name="create-mining-structure-sql-server-data-mining-add-ins"></a>创建挖掘结构（SQL Server 数据挖掘外接程序）
  ![挖掘结构创建按钮，数据挖掘功能区](media/dmc-createstruct.gif "创建挖掘结构按钮，数据挖掘功能区")  
  
 使用**高级**选项**数据建模**组你想要创建数据集用于进行分析，而不一定创建模型时。 在希望尝试使用不同算法时，此功能非常有用。  
  
 创建挖掘结构后，使用[添加到结构的模型](add-model-to-structure-data-mining-add-ins-for-excel.md)向导来创建模型基于该结构。 你还可以通过使用创建新模型**数据挖掘高级查询编辑器**。  
  
 如果使用高级算法之一（[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 支持这些算法，但是无法通过向导使用，例如线性回归或者顺序分析和聚类分析）生成模型，或是如果使用的是自定义算法，则也可以使用此选项。  
  
> [!NOTE]  
>  创建挖掘结构时，也可以建立可用于验证所有模型的随机选择的测试数据集。 这样做十分方便，因为您可以针对公共数据集轻松地比较模型准确性。 只需选择选项，**将数据拆分为定型集和测试集**并指定要为测试保留，通常大约 30%的数据的适当的百分比。  
  
## <a name="use-the-wizard-to-create-a-mining-structure"></a>使用向导创建挖掘结构  
  
1.  在**数据挖掘**功能区上，单击**高级**，然后选择**创建结构**。  
  
2.  在**选择源数据**对话框框中，指定 Excel 范围、 Excel 数据表或包含你想要用于分析的数据的外部数据源。  
  
     单击“下一步” 。  
  
3.  在**选择列**对话框框中，查看所选的数据源中可用的列的列表。  
  
4.  单击右侧的箭头的列名称更改**用法**的列中，选择从这些值：  
  
    -   **Key**。 每个模型都需要至少一个键。  
  
    -   **关键时间**。 此选项仅可用于预测模型（此选项在这些模型中是必需的）。  
  
    -   **包括**。 指示列应包括在挖掘结构中，但不是键列。  
  
    -   **不要使用**。 指示列不应包括在挖掘结构中。  
  
     请记住，您在生成模型时始终可以忽略列，但是以后添加列则需重新处理结构和模型。  
  
5.  单击浏览 **（...）** 按钮以设置内容类型、 数据类型和建模标志。  
  
    > [!NOTE]  
    >  如果列中包含数值数据，则应始终打开此对话框以确保选择正确的数据类型。 在某些情况下，即使输入数据是数字，您也需要将其视为类别变量或离散值，而不是连续数字。  
    >   
    >  例如，默认情况下，邮政编码列可能会作为连续的 Long 数据类型列出，但是为了获取更理想的结果，可以指定将其作为离散的文本值处理。  
    >   
    >  有关详细信息，请参阅部分中的内容类型[选择数据的数据挖掘](choosing-data-for-data-mining.md)。  
  
     单击 **“确定”** 关闭对话框。  
  
6.  单击“下一步” 。  
  
     根据所用数据的类型，您可能希望在此步骤之后完成向导。 在这种情况下，向前跳到**完成**页后，可以将您的挖掘结构。  
  
     对于其他模型，您可使用其他选项来创建测试数据集。  
  
7.  在**将数据拆分为定型集和测试数据集**对话框框中，指定你希望如何数据分区。 默认情况下，30% 的数据用于测试。  
  
     可以选择键入要用于测试的最大行数。  
  
     单击“下一步” 。  
  
8.  在**完成**对话框中，键入名称和新的挖掘结构的说明。  
  
9. 单击 **“完成”**。  
  
### <a name="related-options"></a>相关的选项  
  
|选项|注释|  
|------------|--------------|  
|**选择源数据**对话框|选择 Excel 表时，您应指示数据是否已具有标题。 如果跳过此操作，则第一行数据将用作列名。<br /><br /> 如果使用选项，**外部数据源**，你可以使用任何一种可以在中定义的数据[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]数据源。 但是，外接程序中用于创建新数据源的对话框并非包含 Analysis Services 支持的所有数据源，因此我们建议您提前在 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 服务器上创建数据源，然后使用外接程序进行连接。|  
|**数据源查询编辑器**对话框|连接到指定数据源之后，可以添加列，或创建自定义查询以生成自定义列。|  
|**将数据拆分为定型集和测试数据集**|推荐的值以进行训练和测试集是用于训练的 70%和用于测试; 30%但是，如果你有大量的数据，你可以指定最大用于测试的行数。|  
|“完成”对话框|用于钻取的选项对某些模型类型可用，如果您在挖掘结构中包含详细信息列，则这些选项非常有用。 例如，如果您创建一个聚类分析模型，则可以包含详细信息（如名称或电子邮件地址）用于钻取但不用于分析，以方便联系特定群集中的客户。|  
  
###  <a name="Bkmk_strctcolumn"></a> 列使用情况设置创建挖掘结构向导  
 创建新的挖掘结构时，可以指定在挖掘结构中应包括数据源中的哪些列以及应如何使用这些列。 请记住，一个挖掘结构可以支持多个挖掘模型。  
  
|值|Description|  
|------------|-----------------|  
|**包括**|指定该列包含可用于分析或预测的数据。|  
|**Key**|指定该列包含事务 ID、序列 ID 或处理所需的另一个键。<br /><br /> 所有算法均需要“键”列。 不过，有些算法仅允许单个键，有些算法则允许多个键。<br /><br /> 如果列包含键，但不需要进行处理，则选择**不使用**。|  
|**Key Time**|指定该列包含可用于唯一标识时序中的项的日期或其他数值。|  
|**不要使用**|指定应忽略该列。 不会处理该列中的数据。|  
  
 若要正确处理一个挖掘模型，该算法必须了解唯一地标识每行的键列、用于创建预测的目标列（如果要创建预测模型）以及创建用于预测目标列的关系时所用的输入列。  
  
-   指定为列**不使用**将不会显示在挖掘结构中。  
  
     如果添加了不必要的列或具有错误值的列，则可能会对分析结果产生不利影响。 因此，请确保只包括相关的列。 不过，请记住，未在挖掘结构中使用的列将无法用于查询。  
  
-   指定为列**包括**类型将包括在挖掘结构和更高版本可以进行分析或预测的挖掘模型中使用。  
  
     如果不确定是否将需要使用该列，则可以在挖掘结构中始终包括该列，然后创建一个不使用该列的挖掘模型。 例如，您可以在数据中包括一个电话号码列用于以后引用，但创建一个忽略电话号码的聚类分析模型。 创建分类之后，您可以创建将返回属于特定分类的人员的电话号码的查询。  
  
-   所有算法都要求**密钥**列。 “键”列中的值必须是唯一的。 A **Key Time**列是必需仅用于预测或时间时序模型。 实例时都提供 SQL Server 登录名。  
  
### <a name="requirements"></a>要求  
 若要创建数据挖掘结构，必须具有到 [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] 实例的连接。 连接是必需的，即使处理的是临时结构也需要连接。 有关如何创建或更改连接的详细信息，请参阅[连接到源数据&#40;for Excel 数据挖掘客户端&#41;](connect-to-source-data-data-mining-client-for-excel.md)。  
  
## <a name="see-also"></a>请参阅  
 [创建数据挖掘模型](creating-a-data-mining-model.md)  
  
  